{"mappings":"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","sources":["src/index.js","src/SelectSearch.jsx","src/useSelect.js","src/lib/getOption.js","src/lib/isSame.js","src/lib/updateOption.js","src/lib/toArray.js","src/lib/getDisplayValue.js","src/lib/getValue.js","src/lib/groupOptions.js","src/lib/fuzzySearch.js","src/lib/reduce.js","src/useOptions.js","src/lib/flattenOptions.js","src/useHighlight.js","src/lib/highlight.js","src/lib/classes.js","src/components/Options.jsx","src/components/Option.jsx","src/lib/isSelected.js"],"sourcesContent":["import SelectSearch from './SelectSearch';\nexport { default as useSelect } from './useSelect';\n\nexport default SelectSearch;\n","import { memo, forwardRef, useEffect, useRef, useState } from \"react\";\nimport PropTypes from 'prop-types';\nimport useSelect from './useSelect';\nimport classes from './lib/classes';\nimport Options from './components/Options';\n\nconst SelectSearch = forwardRef(\n    (\n        {\n            disabled,\n            placeholder,\n            multiple,\n            search,\n            autoFocus,\n            autoComplete,\n            id,\n            closeOnSelect,\n            className,\n            renderValue,\n            renderOption,\n            renderGroupHeader,\n            fuzzySearch,\n            emptyMessage,\n            value,\n            ...hookProps\n        },\n        ref,\n    ) => {\n        const selectRef = useRef(null);\n        const cls = (classNames) => classes(classNames, className);\n        const [controlledValue, setControlledValue] = useState(value);\n        const [snapshot, valueProps, optionProps] = useSelect({\n            value: controlledValue,\n            placeholder,\n            multiple,\n            search,\n            closeOnSelect: closeOnSelect && !multiple,\n            useFuzzySearch: fuzzySearch,\n            ...hookProps,\n        });\n        const { highlighted, value: snapValue, fetching, focus } = snapshot;\n\n        const props = {\n            ...valueProps,\n            autoFocus,\n            autoComplete,\n            disabled,\n        };\n\n        useEffect(() => {\n            const { current } = selectRef;\n\n            if (current) {\n                const val = Array.isArray(snapValue) ? snapValue[0] : snapValue;\n                const selected = current.querySelector(\n                    highlighted > -1\n                        ? `[data-index=\"${highlighted}\"]`\n                        : `[value=\"${encodeURIComponent(val)}\"]`,\n                );\n\n                if (selected) {\n                    const rect = current.getBoundingClientRect();\n                    const selectedRect = selected.getBoundingClientRect();\n\n                    current.scrollTop =\n                        selected.offsetTop -\n                        rect.height / 2 +\n                        selectedRect.height / 2;\n                }\n            }\n        }, [snapValue, highlighted, selectRef.current]);\n\n        useEffect(() => setControlledValue(value), [value]);\n\n        return (\n            <div\n                ref={ref}\n                id={id}\n                className={cls({\n                    container: true,\n                    'is-multiple': multiple,\n                    'is-disabled': disabled,\n                    'is-loading': fetching,\n                    'has-focus': focus,\n                })}\n            >\n                {(!multiple || placeholder || search) && (\n                    <div className={cls('value')}>\n                        {renderValue &&\n                            renderValue(props, snapshot, cls('input'))}\n                        {!renderValue && (\n                            <input {...props} className={cls('input')} />\n                        )}\n                    </div>\n                )}\n                <div\n                    className={cls('select')}\n                    ref={selectRef}\n                    onMouseDown={(e) => e.preventDefault()}\n                >\n                    {snapshot.options.length > 0 && (\n                        <Options\n                            options={snapshot.options}\n                            optionProps={optionProps}\n                            renderOption={renderOption}\n                            renderGroupHeader={renderGroupHeader}\n                            disabled={disabled}\n                            snapshot={snapshot}\n                            cls={cls}\n                        />\n                    )}\n                    {!snapshot.options.length && (\n                        <ul className={cls('options')}>\n                            {!snapshot.options.length && emptyMessage && (\n                                <li className={cls('not-found')}>\n                                    {emptyMessage}\n                                </li>\n                            )}\n                        </ul>\n                    )}\n                </div>\n            </div>\n        );\n    },\n);\n\nSelectSearch.defaultProps = {\n    // Data\n    options: [],\n    fuzzySearch: true,\n\n    // InteractionÂ´\n    printOptions: 'auto',\n    closeOnSelect: true,\n    debounce: 250,\n\n    // Attributes\n    autoComplete: 'on',\n\n    // Design\n    className: 'select-search',\n};\n\nSelectSearch.propTypes = {\n    // Data\n    options: PropTypes.arrayOf(\n        PropTypes.shape({\n            name: PropTypes.string.isRequired,\n            value: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n                .isRequired,\n        }),\n    ),\n    getOptions: PropTypes.func,\n    filterOptions: PropTypes.arrayOf(PropTypes.func),\n    fuzzySearch: PropTypes.bool,\n    value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    defaultValue: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n\n    // Interaction\n    multiple: PropTypes.bool,\n    search: PropTypes.bool,\n    disabled: PropTypes.bool,\n    closeOnSelect: PropTypes.bool,\n    debounce: PropTypes.number,\n\n    // Attributes\n    placeholder: PropTypes.string,\n    id: PropTypes.string,\n    autoComplete: PropTypes.string,\n    autoFocus: PropTypes.bool,\n\n    // Design\n    className: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n\n    // Renderers\n    renderOption: PropTypes.func,\n    renderGroupHeader: PropTypes.func,\n    renderValue: PropTypes.func,\n    emptyMessage: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n\n    // Events\n    onChange: PropTypes.func,\n    onFocus: PropTypes.func,\n    onBlur: PropTypes.func,\n};\n\nSelectSearch.displayName = 'SelectSearch';\n\nexport default memo(SelectSearch);\n","import { useEffect, useRef, useState } from 'react';\nimport getOption from './lib/getOption';\nimport updateOption from './lib/updateOption';\nimport getDisplayValue from './lib/getDisplayValue';\nimport getValue from './lib/getValue';\nimport groupOptions from './lib/groupOptions';\nimport fuzzySearch from './lib/fuzzySearch';\nimport reduce from './lib/reduce';\nimport useOptions from './useOptions';\nimport useHighlight from './useHighlight';\n\nconst nullCb = () => {};\n\nexport default function useSelect({\n    options: defaultOptions,\n    defaultValue,\n    value,\n    multiple,\n    search,\n    onChange = nullCb,\n    onFocus = nullCb,\n    onBlur = nullCb,\n    closeOnSelect = true,\n    placeholder,\n    getOptions,\n    filterOptions,\n    useFuzzySearch = true,\n    debounce,\n}) {\n    const ref = useRef();\n    const [option, setOption] = useState(null);\n    const [q, setSearch] = useState('');\n    const [focus, setFocus] = useState(false);\n    const [options, fetching] = useOptions(\n        defaultOptions,\n        getOptions,\n        debounce,\n        q,\n    );\n\n    const onSelect = (v) => {\n        const newOption = updateOption(\n            getOption(decodeURIComponent(v), options),\n            option,\n            multiple,\n        );\n\n        if (value === undefined) {\n            setOption(newOption);\n        }\n\n        onChange(getValue(newOption), newOption);\n\n        setTimeout(() => {\n            if (ref.current && closeOnSelect) {\n                ref.current.blur();\n            }\n        }, 0);\n    };\n\n    const middleware = [\n        useFuzzySearch ? fuzzySearch : null,\n        ...(filterOptions ? filterOptions : []),\n    ];\n    const filteredOptions = groupOptions(reduce(middleware, options, q));\n    const [keyHandlers, highlighted, setHighlighted] = useHighlight(\n        filteredOptions,\n        onSelect,\n        ref,\n    );\n\n    const snapshot = {\n        search: q,\n        focus,\n        option,\n        value: getValue(option),\n        fetching,\n        highlighted,\n        options: filteredOptions,\n        displayValue: getDisplayValue(option, options, placeholder),\n    };\n\n    const valueProps = {\n        tabIndex: '0',\n        readOnly: !search,\n        placeholder,\n        value: focus && search ? q : snapshot.displayValue,\n        ref,\n        ...keyHandlers,\n        onFocus: (e) => {\n            setFocus(true);\n            onFocus(e);\n        },\n        onBlur: (e) => {\n            setFocus(false);\n            setSearch('');\n            setHighlighted(-1);\n            onBlur(e);\n        },\n        onMouseDown: (e) => {\n            if (focus) {\n                e.preventDefault();\n                ref.current.blur();\n            }\n        },\n        onChange: search\n            ? ({ target }) => setSearch(target.value)\n            : null,\n    };\n\n    const optionProps = {\n        tabIndex: '-1',\n        onMouseDown(e) {\n            e.preventDefault();\n            onSelect(e.currentTarget.value);\n        },\n    };\n\n    useEffect(() => {\n        setOption(getOption(\n            value === undefined ? defaultValue : value,\n            options,\n        ));\n    }, [value, options]);\n\n    return [snapshot, valueProps, optionProps];\n}\n","import isSame from './isSame';\n\nexport default function getOption(value, options) {\n    if (Array.isArray(value)) {\n        return value\n            .map((v) => options.find((o) => isSame(o.value, v)))\n            .filter((o) => o);\n    }\n\n    return options.find((o) => isSame(o.value, value)) || null;\n}\n","export default function isSame(v1, v2) {\n    return String(v1) === String(v2);\n}\n","import isSame from './isSame';\nimport toArray from './toArray';\n\nexport default function updateOption(newOption, oldOption, multiple) {\n    if (!newOption) {\n        return oldOption;\n    }\n\n    if (!multiple) {\n        return newOption;\n    }\n\n    if (!oldOption) {\n        return toArray(newOption);\n    }\n\n    const nextOption = toArray(oldOption);\n    const newOptionIndex = nextOption.findIndex((o) =>\n        isSame(o.value, newOption.value),\n    );\n\n    if (newOptionIndex >= 0) {\n        nextOption.splice(newOptionIndex, 1);\n    } else {\n        nextOption.push(newOption);\n    }\n\n    return nextOption;\n}\n","export default function toArray(value) {\n    return Array.isArray(value) ? value : [value];\n}\n","export default function getDisplayValue(option, options, placeholder) {\n    if (!option && !placeholder) {\n        return options && options.length ? options[0].name || '' : '';\n    }\n\n    const isMultiple = Array.isArray(option);\n\n    if (!option && !isMultiple) {\n        return '';\n    }\n\n    return isMultiple\n        ? option\n              .map((o) => o.name)\n              .filter(Boolean)\n              .join(', ')\n        : option.name || '';\n}\n","export default function getValue(option) {\n    if (!option) return null;\n\n    if (Array.isArray(option)) {\n        return option.filter(Boolean).map((o) => o.value);\n    }\n\n    return option.value || null;\n}\n","export default function groupOptions(options) {\n    const nextOptions = [];\n\n    options.forEach((option) => {\n        if (option.group) {\n            const group = nextOptions.findIndex((o) => o.type === 'group' && o.name === option.group);\n\n            if (group >= 0) {\n                nextOptions[group].items.push(option);\n            } else {\n                nextOptions.push({\n                    items: [option],\n                    type: 'group',\n                    name: option.group,\n                });\n            }\n        } else {\n            nextOptions.push(option);\n        }\n    });\n\n    return nextOptions;\n}\n","function search(q, text) {\n    const searchLength = q.length;\n    const textLength = text.length;\n\n    if (searchLength > textLength) {\n        return false;\n    }\n\n    if (text.indexOf(q) >= 0) {\n        return true;\n    }\n\n    mainLoop: for (let i = 0, j = 0; i < searchLength; i += 1) {\n        const ch = q.charCodeAt(i);\n\n        while (j < textLength) {\n            if (text.charCodeAt(j++) === ch) {\n                continue mainLoop;\n            }\n        }\n\n        return false;\n    }\n\n    return true;\n}\n\nexport default function fuzzySearch(options, query) {\n    return !query.length\n        ? options\n        : options.filter((o) =>\n              search(\n                  query.toLowerCase(),\n                  `${o.name} ${o.group || ''}`.trim().toLowerCase(),\n              ),\n          );\n}\n","export default function reduce(middleware, items, query) {\n    return middleware.filter(Boolean)\n        .reduce((data, cb) => cb(data, query), items)\n        .map((item, i) => ({ ...item, index: i }));\n}\n","import { useEffect, useState } from 'react';\nimport flattenOptions from './lib/flattenOptions';\n\nexport default function useOptions(\n    defaultOptions,\n    getOptions,\n    debounceTime,\n    search,\n) {\n    const [options, setOptions] = useState(() => flattenOptions(defaultOptions));\n    const [fetching, setFetching] = useState(false);\n\n    useEffect(() => {\n        let timeout;\n\n        if (!getOptions) {\n            return;\n        }\n\n        timeout = setTimeout(() => {\n            const optionsReq = getOptions(search, options);\n\n            setFetching(true);\n\n            Promise.resolve(optionsReq)\n                .then((newOptions) => setOptions(flattenOptions(newOptions)))\n                .finally(() => setFetching(false));\n        }, debounceTime);\n\n        return () => {\n            clearTimeout(timeout);\n        };\n    }, [search]);\n\n    useEffect(() => {\n        setOptions(flattenOptions(defaultOptions));\n    }, [defaultOptions]);\n\n    return [options, fetching];\n}\n","export default function flattenOptions(options) {\n    let index = 0;\n\n    return options.map((option) => {\n        if (option.type === 'group') {\n            return option.items.map((o) => ({\n                ...o,\n                group: option.name,\n                index: index++,\n            }));\n        }\n\n        return { ...option, index: index++ };\n    }).flat();\n}\n","import { useState } from 'react';\nimport highlight from './lib/highlight';\n\nexport default function useHighlight(options, onSelect, ref) {\n    const [highlighted, setHighlighted] = useState(-1);\n\n    return [\n        {\n            onKeyDown: (e) => {\n                const key = e.key.replace('Arrow', '').toLowerCase();\n\n                if (key === 'down' || key === 'up') {\n                    e.preventDefault();\n                    setHighlighted(highlight(highlighted, key, options));\n                }\n            },\n            onKeyUp: (e) => {\n                if (e.key === 'Escape') {\n                    e.preventDefault();\n                    ref.current.blur();\n                } else if (e.key === 'Enter') {\n                    e.preventDefault();\n\n                    if (options[highlighted]) {\n                        onSelect(options[highlighted].value);\n                    }\n                }\n            },\n        },\n        highlighted,\n        setHighlighted,\n    ];\n}\n","export default function highlight(current, dir, options) {\n    const max = options.length - 1;\n    let option = null;\n    let i = -1;\n    let newHighlighted = current;\n\n    while (i++ <= max && (!option || option.disabled)) {\n        newHighlighted =\n            dir === 'down' ? newHighlighted + 1 : newHighlighted - 1;\n\n        if (newHighlighted < 0) {\n            newHighlighted = max;\n        } else if (newHighlighted > max) {\n            newHighlighted = 0;\n        }\n\n        option = options[newHighlighted];\n    }\n\n    return newHighlighted;\n}\n","const isString = (str) => typeof str === 'string';\nconst getClassName = (str, className) =>\n    isString(className) ? `${className}-${str}` : className[str];\n\nexport default function classes(classNames, className) {\n    if (isString(classNames)) return getClassName(classNames, className);\n\n    return Object.entries(classNames)\n        .filter(([cls, display]) => cls && display)\n        .map(([cls]) => getClassName(cls, className))\n        .join(' ');\n}\n","/* eslint-disable react/prop-types */\nimport { memo } from 'react';\nimport Option from './Option';\nimport isSelected from '../lib/isSelected';\n\nfunction Options(props) {\n    const {\n        options,\n        cls,\n        renderOption,\n        renderGroupHeader,\n        optionProps,\n        snapshot,\n        disabled,\n    } = props;\n\n    return (\n        <ul className={cls('options')}>\n            {options.map((o) => {\n                if (o.type === 'group') {\n                    return (\n                        <li role=\"none\" className={cls('row')} key={o.name}>\n                            <div className={cls('group')}>\n                                <div className={cls('group-header')}>\n                                    {renderGroupHeader\n                                        ? renderGroupHeader(o.name)\n                                        : o.name}\n                                </div>\n                                <Options {...props} options={o.items} />\n                            </div>\n                        </li>\n                    );\n                }\n\n                return (\n                    <Option\n                        key={o.value}\n                        option={o}\n                        optionProps={optionProps}\n                        cls={cls}\n                        renderOption={renderOption}\n                        selected={isSelected(o, snapshot.option)}\n                        highlighted={snapshot.highlighted === o.index}\n                        disabled={o.disabled || disabled}\n                    />\n                );\n            })}\n        </ul>\n    );\n}\n\nexport default memo(Options);\n","/* eslint-disable react/prop-types */\nimport { memo } from 'react';\n\nfunction Option({\n    optionProps,\n    highlighted,\n    selected,\n    option,\n    cls,\n    renderOption,\n    disabled,\n}) {\n    const props = {\n        ...optionProps,\n        value: encodeURIComponent(option.value),\n        disabled,\n    };\n    const className = cls({\n        option: true,\n        'is-selected': selected,\n        'is-highlighted': highlighted,\n    });\n\n    return (\n        <li className={cls('row')} role=\"menuitem\" data-index={option.index}>\n            {renderOption &&\n                renderOption(\n                    props,\n                    option,\n                    { selected, highlighted },\n                    className,\n                )}\n            {!renderOption && (\n                <button type=\"button\" className={className} {...props}>\n                    {option.name}\n                </button>\n            )}\n        </li>\n    );\n}\n\nexport default memo(Option);\n","export default function isSelected(option, selectedOption) {\n    if (!selectedOption) return false;\n\n    return Array.isArray(selectedOption)\n        ? selectedOption.findIndex((o) => o.value === option.value) >= 0\n        : selectedOption.value === option.value;\n}\n"],"names":["SelectSearch","default","useSelect","memo","forwardRef","useEffect","useRef","useState","PropTypes","classes","Options","disabled","placeholder","multiple","search","autoFocus","autoComplete","id","closeOnSelect","className","renderValue","renderOption","renderGroupHeader","fuzzySearch","emptyMessage","value","hookProps","ref","selectRef","cls","classNames","controlledValue","setControlledValue","snapshot","valueProps","optionProps","useFuzzySearch","highlighted","snapValue","fetching","focus","props","current","val","Array","isArray","selected","querySelector","encodeURIComponent","rect","getBoundingClientRect","selectedRect","scrollTop","offsetTop","height","container","e","preventDefault","options","length","defaultProps","printOptions","debounce","displayName","getOption","updateOption","getDisplayValue","getValue","groupOptions","reduce","useOptions","useHighlight","nullCb","defaultOptions","defaultValue","onChange","onFocus","onBlur","getOptions","filterOptions","option","setOption","q","setSearch","setFocus","onSelect","v","newOption","decodeURIComponent","undefined","setTimeout","blur","middleware","filteredOptions","keyHandlers","setHighlighted","displayValue","tabIndex","readOnly","onMouseDown","target","currentTarget","isSame","map","find","o","filter","v1","v2","String","toArray","oldOption","nextOption","newOptionIndex","findIndex","splice","push","name","isMultiple","Boolean","join","nextOptions","forEach","group","type","items","text","searchLength","textLength","indexOf","mainLoop","i","j","ch","charCodeAt","query","toLowerCase","trim","data","cb","item","index","flattenOptions","debounceTime","setOptions","setFetching","timeout","optionsReq","Promise","resolve","then","newOptions","finally","clearTimeout","flat","highlight","onKeyDown","key","replace","onKeyUp","dir","max","newHighlighted","isString","str","getClassName","Object","entries","display","Option","isSelected","selectedOption"],"version":3,"file":"index.js.map"}